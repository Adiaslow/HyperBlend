{% extends "list_base.html" %}

{% block title %} - Molecules{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/molecules.css') }}">
{% endblock %}

{% block list_actions %}
<div class="action-buttons">
    <button id="migrateIdsButton" class="action-button secondary-button">
        Migrate IDs
    </button>
</div>
{% endblock %}

{% block filters %}
<!-- Molecule-specific filters can go here -->
{% endblock %}

{% block form_fields %}
<div class="form-row">
    <div class="form-group">
        <label for="moleculeName" class="form-label">Name</label>
        <input type="text" id="moleculeName" class="form-input" placeholder="e.g., Caffeine">
            </div>
    <div class="form-group">
        <label for="moleculeCAS" class="form-label">CAS Number</label>
        <input type="text" id="moleculeCAS" class="form-input" placeholder="e.g., 58-08-2">
                    </div>
                </div>
<div class="form-row">
    <div class="form-group">
        <label for="moleculePubChemCID" class="form-label">PubChem CID</label>
        <input type="text" id="moleculePubChemCID" class="form-input" placeholder="e.g., 2519">
                </div>
    <div class="form-group">
        <label for="moleculeInChIKey" class="form-label">InChI Key</label>
        <input type="text" id="moleculeInChIKey" class="form-input" placeholder="e.g., RYYVLZVUVIJVGH-UHFFFAOYSA-N">
                    </div>
                </div>
<div class="form-row">
                        <div class="form-group">
        <label for="moleculeSMILES" class="form-label">SMILES</label>
        <input type="text" id="moleculeSMILES" class="form-input" placeholder="e.g., CN1C=NC2=C1C(=O)N(C(=O)N2C)C">
                        </div>
                        <div class="form-group">
        <label for="moleculeChEMBL" class="form-label">ChEMBL ID</label>
        <input type="text" id="moleculeChEMBL" class="form-input" placeholder="e.g., CHEMBL113">
                            </div>
                        </div>
<div id="addMoleculeResult" class="hidden result-message"></div>
{% endblock %}

{% block scripts %}
<!-- Make sure API is loaded first, then list_utils.js, list_page.js, and finally molecules.js -->
<script src="{{ url_for('static', filename='js/molecules.js') }}"></script>
<script>
    // Wait for document to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Check if all required dependencies are loaded
        if (typeof window.api === 'undefined') {
            console.error('API client not loaded. Check api.js');
            return;
        }
        
        if (typeof ListPage === 'undefined') {
            console.error('ListPage class not loaded. Check list_page.js');
            return;
        }
        
        if (typeof MoleculePage === 'undefined') {
            console.error('MoleculePage class not loaded. Check molecules.js');
            return;
        }
        
        // Initialize molecule page
        console.log('All dependencies loaded, initializing MoleculePage');
        window.moleculePage = new MoleculePage();
        
        // Log success
        console.log('MoleculePage initialized successfully');
    });
</script>
{% endblock %} 